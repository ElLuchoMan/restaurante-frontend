<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<div class="container-fluid py-5">
    <div class="container py-5">
        <div class="row justify-content-center">
            <div class="col-lg-6">
                <h1 class="text-center mb-4">Registro</h1>
                <div class="form-card-bg p-5">
                    <form (ngSubmit)="onSubmit()" #registerForm="ngForm">
                        <!-- Checkbox solo visible para administradores -->
                        <div class="form-group form-check" *ngIf="isAdmin()">
                            <input type="checkbox" class="form-check-input" id="esTrabajador" [(ngModel)]="esTrabajador"
                                name="esTrabajador" />
                            <label class="form-check-label" for="esTrabajador">¿Registrar un trabajador?</label>
                        </div>
                        <div class="form-group">
                            <label for="documento">Documento</label>
                            <input type="number" id="documento" name="documento" required #campoDocumento="ngModel"
                                [(ngModel)]="documento" required class="form-control" placeholder="0000000000" />
                            <div *ngIf="campoDocumento.invalid && campoDocumento.touched" class="text-danger">
                                El documento es obligatorio.
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="nombre">Nombre</label>
                            <input type="text" id="nombre" name="nombre" required #campoNombre="ngModel"
                                [(ngModel)]="nombre" required class="form-control" placeholder="Juan" />
                            <div *ngIf="campoNombre.invalid && campoNombre.touched" class="text-danger">
                                El nombre es obligatorio.
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="apellido">Apellido</label>
                            <input type="text" id="apellido" name="apellido" [(ngModel)]="apellido" required
                                class="form-control" placeholder="Pérez" />
                        </div>
                        <div class="form-group">
                            <label for="telefono">Teléfono</label>
                            <input type="text" id="telefono" name="telefono" required #campoTelefono="ngModel"
                                [(ngModel)]="telefono" required class="form-control" placeholder="3100000000" />
                            <div *ngIf="campoTelefono.invalid && campoTelefono.touched" class="text-danger">
                                El teléfono es obligatorio.
                            </div>
                        </div>
                        <div class="form-group" *ngIf="!esTrabajador">
                            <label for="observaciones">Observaciones</label>
                            <textarea class="form-control" placeholder="Observaciones" name="observaciones"
                                [(ngModel)]="observaciones" id="floatingTextarea2" style="height: 38px"></textarea>
                        </div>
                        <div *ngIf="!esTrabajador">
                            <div class="form-group">
                                <label for="direccion">Dirección</label>
                                <input type="text" id="direccion" name="direccion" required #campoDireccion="ngModel"
                                    [(ngModel)]="direccion" required class="form-control"
                                    placeholder="Calle 1 # 2 - 3" />
                            </div>
                            <div *ngIf="campoDireccion.invalid && campoDireccion.touched" class="text-danger">
                                El dirección es obligatoria.
                            </div>
                        </div>
                        <div *ngIf="esTrabajador">
                            <div class="form-group">
                                <label for="fechaNacimiento">Fecha de Nacimiento</label>
                                <input type="date" id="fechaNacimiento" name="fechaNacimiento"
                                    [(ngModel)]="fechaNacimiento" required class="form-control" />
                            </div>
                            <div class="form-group">
                                <div class="custom-control custom-switch">
                                    <input type="checkbox" class="custom-control-input" id="nuevo" [(ngModel)]="nuevo"
                                        name="nuevo" required>
                                    <label class="custom-control-label" for="nuevo">¿Nuevo?</label>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="sueldo">Sueldo</label>
                                <input type="number" id="sueldo" name="sueldo" [(ngModel)]="sueldo" class="form-control"
                                    placeholder="1000000" />
                            </div>
                            <div class="form-group">
                                <label for="rol">Rol</label>
                                <select id="rol" name="rol" [(ngModel)]="rol" required class="form-control"
                                    [ngClass]="{'is-invalid': registerForm.submitted && !rol}">
                                    <option value="" disabled selected>Seleccione un rol</option>
                                    <option *ngFor="let rol of roles" [value]="rol">{{rol}}</option>
                                </select>
                                <div *ngIf="registerForm.submitted && !rol" class="invalid-feedback">
                                    Por favor selecciona un rol.
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="horaEntrada">Hora Entrada</label>
                                <select id="horaEntrada" name="horaEntrada" [(ngModel)]="horaEntrada" required
                                    class="form-control"
                                    [ngClass]="{'is-invalid': registerForm.submitted && !horaEntrada}">
                                    <option value="" disabled selected>Seleccione una hora</option>
                                    <option *ngFor="let hora of horasEntradaDisponibles" [value]="hora">{{hora}}
                                    </option>
                                </select>
                                <div *ngIf="registerForm.submitted && !horaEntrada" class="invalid-feedback">
                                    Por favor selecciona una hora.
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="horaSalida">Hora Salida</label>
                                <select id="horaSalida" name="horaSalida" [(ngModel)]="horaSalida" required
                                    class="form-control"
                                    [ngClass]="{'is-invalid': registerForm.submitted && !horaSalida}">
                                    <option value="" disabled selected>Seleccione una hora</option>
                                    <option *ngFor="let hora of horasSalidaDisponibles" [value]="hora">{{hora}}</option>
                                </select>
                                <div *ngIf="registerForm.submitted && !horaSalida" class="invalid-feedback">
                                    Por favor selecciona una hora.
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="password">Contraseña</label>
                            <input type="password" id="password" name="password" [(ngModel)]="password" required
                                class="form-control" placeholder="******" />
                        </div>
                        <button type="submit" class="btn btn-primary btn-block" [disabled]="registerForm.invalid">
                            {{ esTrabajador ? 'Registrar Trabajador' : 'Registrar Cliente' }}
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>