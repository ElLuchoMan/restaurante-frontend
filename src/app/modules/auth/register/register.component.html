<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<div class="container-fluid py-5">
  <div class="container py-5">
    <div class="row justify-content-center">
      <div class="col-lg-6">
        <h1 class="text-center mb-4">Registro</h1>
        <div class="form-card-bg p-5">
          <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
            <div class="form-group custom-control custom-checkbox" *ngIf="isAdmin()">
              <input
                type="checkbox"
                class="custom-control-input"
                id="esTrabajador"
                formControlName="esTrabajador"
              />
              <label class="custom-control-label" for="esTrabajador"
                >¿Registrar un trabajador?</label
              >
            </div>
            <div class="form-group">
              <label for="documento">Documento</label>
              <input
                type="number"
                id="documento"
                formControlName="documento"
                class="form-control"
                placeholder="0000000000"
                [attr.aria-invalid]="
                  registerForm.get('documento')?.invalid && registerForm.get('documento')?.touched
                    ? 'true'
                    : null
                "
                aria-describedby="reg-documento-error"
              />
              <div
                *ngIf="
                  registerForm.get('documento')?.invalid && registerForm.get('documento')?.touched
                "
                id="reg-documento-error"
                class="text-danger"
                role="alert"
              >
                El documento es obligatorio.
              </div>
            </div>
            <div class="form-group">
              <label for="nombre">Nombre</label>
              <input
                type="text"
                id="nombre"
                formControlName="nombre"
                class="form-control"
                placeholder="Juan"
                [attr.aria-invalid]="
                  registerForm.get('nombre')?.invalid && registerForm.get('nombre')?.touched
                    ? 'true'
                    : null
                "
                aria-describedby="reg-nombre-error"
              />
              <div
                *ngIf="registerForm.get('nombre')?.invalid && registerForm.get('nombre')?.touched"
                id="reg-nombre-error"
                class="text-danger"
                role="alert"
              >
                El nombre es obligatorio.
              </div>
            </div>
            <div class="form-group">
              <label for="apellido">Apellido</label>
              <input
                type="text"
                id="apellido"
                formControlName="apellido"
                class="form-control"
                placeholder="Pérez"
              />
            </div>
            <div class="form-group">
              <label for="telefono">Teléfono</label>
              <input
                type="text"
                id="telefono"
                formControlName="telefono"
                class="form-control"
                placeholder="3100000000"
                [attr.aria-invalid]="
                  registerForm.get('telefono')?.invalid && registerForm.get('telefono')?.touched
                    ? 'true'
                    : null
                "
                aria-describedby="reg-telefono-error"
              />
              <div
                *ngIf="
                  registerForm.get('telefono')?.invalid && registerForm.get('telefono')?.touched
                "
                id="reg-telefono-error"
                class="text-danger"
                role="alert"
              >
                El teléfono es obligatorio.
              </div>
            </div>
            <div class="form-group" *ngIf="!esTrabajador">
              <label for="observaciones">Observaciones</label>
              <textarea
                class="form-control"
                placeholder="Observaciones"
                formControlName="observaciones"
                id="floatingTextarea2"
                style="height: 38px"
              ></textarea>
            </div>
            <div *ngIf="!esTrabajador">
              <div class="form-group">
                <label for="direccion">Dirección</label>
                <input
                  type="text"
                  id="direccion"
                  formControlName="direccion"
                  class="form-control"
                  placeholder="Calle 1 # 2 - 3"
                  [attr.aria-invalid]="
                    registerForm.get('direccion')?.invalid && registerForm.get('direccion')?.touched
                      ? 'true'
                      : null
                  "
                  aria-describedby="reg-direccion-error"
                />
              </div>
              <div
                *ngIf="
                  registerForm.get('direccion')?.invalid && registerForm.get('direccion')?.touched
                "
                id="reg-direccion-error"
                class="text-danger"
                role="alert"
              >
                El dirección es obligatoria.
              </div>
              <div class="form-group">
                <label for="correo">Correo</label>
                <input
                  type="text"
                  id="correo"
                  formControlName="correo"
                  class="form-control"
                  placeholder="ejemplo@correo.com"
                  [attr.aria-invalid]="
                    registerForm.get('correo')?.invalid && registerForm.get('correo')?.touched
                      ? 'true'
                      : null
                  "
                  aria-describedby="reg-correo-error"
                />
              </div>
              <div
                *ngIf="registerForm.get('correo')?.invalid && registerForm.get('correo')?.touched"
                id="reg-correo-error"
                class="text-danger"
                role="alert"
              >
                El correo es obligatorio.
              </div>
            </div>
            <div *ngIf="esTrabajador">
              <div class="form-group">
                <label for="fechaNacimiento">Fecha de Nacimiento</label>
                <input
                  type="date"
                  id="fechaNacimiento"
                  formControlName="fechaNacimiento"
                  class="form-control"
                />
              </div>
              <div class="form-group">
                <div class="custom-control custom-switch">
                  <input
                    type="checkbox"
                    class="custom-control-input"
                    id="nuevo"
                    formControlName="nuevo"
                  />
                  <label class="custom-control-label" for="nuevo">¿Nuevo?</label>
                </div>
              </div>
              <div class="form-group">
                <label for="sueldo">Sueldo</label>
                <input
                  type="number"
                  id="sueldo"
                  formControlName="sueldo"
                  class="form-control"
                  placeholder="1000000"
                />
              </div>
              <div class="form-group">
                <label for="rol">Rol</label>
                <select
                  id="rol"
                  formControlName="rol"
                  class="form-control"
                  [ngClass]="{
                    'is-invalid':
                      registerForm.get('rol')?.invalid && registerForm.get('rol')?.touched,
                  }"
                >
                  <option value="" disabled selected>Seleccione un rol</option>
                  <option *ngFor="let rol of roles" [value]="rol">{{ rol }}</option>
                </select>
                <div
                  *ngIf="registerForm.get('rol')?.invalid && registerForm.get('rol')?.touched"
                  class="invalid-feedback"
                >
                  Por favor selecciona un rol.
                </div>
              </div>
              <div class="form-group">
                <label for="horaEntrada">Hora Entrada</label>
                <select
                  id="horaEntrada"
                  formControlName="horaEntrada"
                  class="form-control"
                  [ngClass]="{
                    'is-invalid':
                      registerForm.get('horaEntrada')?.invalid &&
                      registerForm.get('horaEntrada')?.touched,
                  }"
                >
                  <option value="" disabled selected>Seleccione una hora</option>
                  <option *ngFor="let hora of horasEntradaDisponibles" [value]="hora">
                    {{ hora }}
                  </option>
                </select>
                <div
                  *ngIf="
                    registerForm.get('horaEntrada')?.invalid &&
                    registerForm.get('horaEntrada')?.touched
                  "
                  class="invalid-feedback"
                >
                  Por favor selecciona una hora.
                </div>
              </div>
              <div class="form-group">
                <label for="horaSalida">Hora Salida</label>
                <select
                  id="horaSalida"
                  formControlName="horaSalida"
                  class="form-control"
                  [ngClass]="{
                    'is-invalid':
                      registerForm.get('horaSalida')?.invalid &&
                      registerForm.get('horaSalida')?.touched,
                  }"
                >
                  <option value="" disabled selected>Seleccione una hora</option>
                  <option *ngFor="let hora of horasSalidaDisponibles" [value]="hora">
                    {{ hora }}
                  </option>
                </select>
                <div
                  *ngIf="
                    registerForm.get('horaSalida')?.invalid &&
                    registerForm.get('horaSalida')?.touched
                  "
                  class="invalid-feedback"
                >
                  Por favor selecciona una hora.
                </div>
              </div>
            </div>
            <div class="form-group">
              <label for="password">Contraseña</label>
              <input
                type="password"
                id="password"
                formControlName="password"
                class="form-control"
                placeholder="******"
              />
            </div>
            <button
              type="submit"
              class="btn btn-primary btn-block"
              [disabled]="registerForm.invalid"
            >
              {{ esTrabajador ? 'Registrar Trabajador' : 'Registrar Cliente' }}
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
