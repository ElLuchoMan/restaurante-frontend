<section class="page-shell">
  <div class="container">
    <div class="card-glass p-3 mb-3" *ngIf="reservas.length !== 0">
      <div class="reservas-header">
        <h2 class="section-title text-center mb-1">Reservas del {{ fechaHoy }}</h2>
        <p class="subtitle text-center mb-0">Resumen en tiempo real</p>
      </div>

      <div class="reservas-list" aria-label="Reservas del dÃ­a">
        <div class="reserva-item" *ngFor="let r of reservas; let i = index">
          <div class="reserva-left">
            <div
              class="reserva-hora tooltip-btn"
              [attr.data-tooltip]="`Hora: ${r.horaReserva}`"
              [attr.aria-label]="`Hora de la reserva: ${r.horaReserva}`"
            >
              {{ r.horaReserva }}
            </div>
          </div>
          <div class="reserva-center">
            <div class="reserva-cliente">{{ r.nombreCompleto }}</div>
            <div class="reserva-telefono">{{ r.telefono }}</div>
            <div class="reserva-indicaciones" *ngIf="r.indicaciones">{{ r.indicaciones }}</div>
          </div>
          <div class="reserva-right">
            <span
              class="badge estado tooltip-btn"
              [ngClass]="{
                'bg-warning': r.estadoReserva === 'PENDIENTE',
                'bg-success': r.estadoReserva === 'CONFIRMADA',
                'bg-secondary': r.estadoReserva === 'CUMPLIDA',
                'bg-danger': r.estadoReserva === 'CANCELADA',
              }"
              [attr.data-tooltip]="`Estado: ${r.estadoReserva}`"
              [attr.aria-label]="`Estado: ${r.estadoReserva}`"
              >{{ r.estadoReserva }}</span
            >
            <span
              class="badge bg-secondary pax tooltip-btn"
              [attr.data-tooltip]="`Personas: ${r.personas}`"
              [attr.aria-label]="`Cantidad de personas: ${r.personas}`"
              ><i class="fas fa-user me-1"></i>{{ r.personas }}</span
            >
            <span
              class="badge hora-badge tooltip-btn"
              [attr.data-tooltip]="`Hora: ${r.horaReserva}`"
              [attr.aria-label]="`Hora de la reserva: ${r.horaReserva}`"
              ><i class="far fa-clock me-1"></i>{{ r.horaReserva }}</span
            >
            <button
              class="btn-icon ok tooltip-btn"
              (click)="confirmarReserva(r)"
              aria-label="Confirmar"
              data-tooltip="Confirmar"
            >
              <i class="fas fa-check"></i>
            </button>
            <button
              class="btn-icon cancel tooltip-btn"
              (click)="cancelarReserva(r)"
              aria-label="Cancelar"
              data-tooltip="Cancelar"
            >
              <i class="fas fa-times"></i>
            </button>
            <button
              class="btn-icon ok tooltip-btn"
              (click)="cumplirReserva(r)"
              aria-label="Cumplida"
              data-tooltip="Marcar como cumplida"
            >
              <i class="fas fa-check-double"></i>
            </button>
          </div>
        </div>
      </div>
    </div>

    <div *ngIf="reservas.length === 0" class="alert alert-info text-center mt-4">
      No hay reservas para hoy.
    </div>
  </div>
</section>
